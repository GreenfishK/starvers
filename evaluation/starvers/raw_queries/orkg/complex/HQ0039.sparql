SELECT ?ratio
WHERE {
  {
    SELECT (COUNT(?comparison) AS ?n_valid_comparisons)
    WHERE {
      ?comparison a orkgc:Comparison.
    }
  }
  {
    SELECT (COUNT(DISTINCT ?comparison_) AS ?n_comparisons_with_missing_class) {
      ?comparison_ orkgp:compareContribution ?contribution.
      FILTER(
        NOT EXISTS {
            ?comparison_ a orkgc:Comparison
          }
       )
     }
   }
   BIND(
     CONCAT(
       ROUND(
         xsd:double(?n_comparisons_with_missing_class) / xsd:double(?n_valid_comparisons + ?n_comparisons_with_missing_class) * 100
       ),
       " %"
     ) AS ?ratio
   )
}
